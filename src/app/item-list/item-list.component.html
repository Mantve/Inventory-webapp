<div class="container">
    <ul class="list-group">
        <ng-container *ngTemplateOutlet="recursiveitemsTmpl; context:{ items: items }"></ng-container>
    </ul>
</div>


<ng-template #recursiveitemsTmpl let-items="items">
    <div class="d-flex gap-2 w-100 justify-content-left align-items-center border-0 border-start"
        *ngFor="let item of items" data-bs-toggle="collapse" attr.data-bs-target="#item{{item.id}}"
        aria-expanded="false">



        <div class="w-100">
            <div class="d-flex">
                <svg type="button" class="bi align-self-center" *ngIf="item.items.length> 0" width="32" height="32"
                    fill="currentColor">
                    <!--button for expanding children-->
                    <use xlink:href="bootstrap-icons.svg#plus" />
                </svg>
                <a class="list-group-item list-group-item-action d-flex gap-3 py-3 border border-0 w-100"
                    attr.aria-controls="item{{item.id}}" [routerLink]="['/item/'+item.id]" routerLinkActive="active"
                    [routerLinkActiveOptions]="{exact: true}">
                    <!-- the item itself-->

                    <div class="d-flex gap-2 w-100 justify-content-between">
                        <div>
                            <h6 class="mb-0">{{item.name}}</h6>
                            <p class="mb-0 opacity-75">{{item.comments}}</p>
                        </div>
                        <small class="opacity-50 text-nowrap">{{item.category.name}}</small>
                    </div>
                </a>
            </div>

            <ul class="list-group ps-5" *ngIf="item.items.length > 0">
                <!--children-->
                <div class="collapse" attr.id="item{{item.id}}">
                    <ng-container *ngTemplateOutlet="recursiveitemsTmpl; context:{ items: item.items }">
                    </ng-container>
                </div>
            </ul>
        </div>

    </div>
</ng-template>